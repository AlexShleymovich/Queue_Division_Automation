{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __await = this && this.__await || function (v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n};\n\nvar __asyncGenerator = this && this.__asyncGenerator || function (thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n      i,\n      q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n};\n\nvar __asyncValues = this && this.__asyncValues || function (o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n      i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WebClient = exports.WebClientEvent = void 0;\n\nconst querystring_1 = require(\"querystring\");\n\nconst path_1 = require(\"path\");\n\nconst is_stream_1 = __importDefault(require(\"is-stream\"));\n\nconst p_queue_1 = __importDefault(require(\"p-queue\"));\n\nconst p_retry_1 = __importStar(require(\"p-retry\"));\n\nconst axios_1 = __importDefault(require(\"axios\"));\n\nconst form_data_1 = __importDefault(require(\"form-data\"));\n\nconst is_electron_1 = __importDefault(require(\"is-electron\"));\n\nconst methods_1 = require(\"./methods\");\n\nconst instrument_1 = require(\"./instrument\");\n\nconst errors_1 = require(\"./errors\");\n\nconst logger_1 = require(\"./logger\");\n\nconst retry_policies_1 = require(\"./retry-policies\");\n\nconst helpers_1 = __importDefault(require(\"./helpers\"));\n/*\n * Helpers\n */\n\n\nconst defaultFilename = 'Untitled';\nconst defaultPageSize = 200;\n\nconst noopPageReducer = () => undefined;\n\nvar WebClientEvent;\n\n(function (WebClientEvent) {\n  // TODO: safe to rename this to conform to PascalCase enum type naming convention?\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  WebClientEvent[\"RATE_LIMITED\"] = \"rate_limited\";\n})(WebClientEvent = exports.WebClientEvent || (exports.WebClientEvent = {}));\n/**\n * A client for Slack's Web API\n *\n * This client provides an alias for each {@link https://api.slack.com/methods|Web API method}. Each method is\n * a convenience wrapper for calling the {@link WebClient#apiCall} method using the method name as the first parameter.\n */\n\n\nclass WebClient extends methods_1.Methods {\n  /**\n   * @param token - An API token to authenticate/authorize with Slack (usually start with `xoxp`, `xoxb`)\n   */\n  constructor(token) {\n    let {\n      slackApiUrl = 'https://slack.com/api/',\n      logger = undefined,\n      logLevel = undefined,\n      maxRequestConcurrency = 3,\n      retryConfig = retry_policies_1.tenRetriesInAboutThirtyMinutes,\n      agent = undefined,\n      tls = undefined,\n      timeout = 0,\n      rejectRateLimitedCalls = false,\n      headers = {},\n      teamId = undefined\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n    this.token = token;\n    this.slackApiUrl = slackApiUrl;\n    this.retryConfig = retryConfig;\n    this.requestQueue = new p_queue_1.default({\n      concurrency: maxRequestConcurrency\n    }); // NOTE: may want to filter the keys to only those acceptable for TLS options\n\n    this.tlsConfig = tls !== undefined ? tls : {};\n    this.rejectRateLimitedCalls = rejectRateLimitedCalls;\n    this.teamId = teamId; // Logging\n\n    if (typeof logger !== 'undefined') {\n      this.logger = logger;\n\n      if (typeof logLevel !== 'undefined') {\n        this.logger.debug('The logLevel given to WebClient was ignored as you also gave logger');\n      }\n    } else {\n      this.logger = (0, logger_1.getLogger)(WebClient.loggerName, logLevel !== null && logLevel !== void 0 ? logLevel : logger_1.LogLevel.INFO, logger);\n    } // eslint-disable-next-line no-param-reassign\n\n\n    if (this.token && !headers.Authorization) headers.Authorization = `Bearer ${this.token}`;\n    this.axios = axios_1.default.create({\n      timeout,\n      baseURL: slackApiUrl,\n      headers: (0, is_electron_1.default)() ? headers : Object.assign({\n        'User-Agent': (0, instrument_1.getUserAgent)()\n      }, headers),\n      httpAgent: agent,\n      httpsAgent: agent,\n      transformRequest: [this.serializeApiCallOptions.bind(this)],\n      validateStatus: () => true,\n      maxRedirects: 0,\n      // disabling axios' automatic proxy support:\n      // axios would read from envvars to configure a proxy automatically, but it doesn't support TLS destinations.\n      // for compatibility with https://api.slack.com, and for a larger set of possible proxies (SOCKS or other\n      // protocols), users of this package should use the `agent` option to configure a proxy.\n      proxy: false\n    }); // serializeApiCallOptions will always determine the appropriate content-type\n\n    delete this.axios.defaults.headers.post['Content-Type'];\n    this.logger.debug('initialized');\n  }\n  /**\n   * Generic method for calling a Web API method\n   *\n   * @param method - the Web API method to call {@link https://api.slack.com/methods}\n   * @param options - options\n   */\n\n\n  async apiCall(method) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.logger.debug(`apiCall('${method}') start`);\n    warnDeprecations(method, this.logger);\n    warnIfFallbackIsMissing(method, this.logger, options);\n    warnIfThreadTsIsNotString(method, this.logger, options);\n\n    if (typeof options === 'string' || typeof options === 'number' || typeof options === 'boolean') {\n      throw new TypeError(`Expected an options argument but instead received a ${typeof options}`);\n    }\n\n    const headers = {};\n    if (options.token) headers.Authorization = `Bearer ${options.token}`;\n    const response = await this.makeRequest(method, Object.assign({\n      team_id: this.teamId\n    }, options), headers);\n    const result = this.buildResult(response); // log warnings in response metadata\n\n    if (result.response_metadata !== undefined && result.response_metadata.warnings !== undefined) {\n      result.response_metadata.warnings.forEach(this.logger.warn.bind(this.logger));\n    } // log warnings and errors in response metadata messages\n    // related to https://api.slack.com/changelog/2016-09-28-response-metadata-is-on-the-way\n\n\n    if (result.response_metadata !== undefined && result.response_metadata.messages !== undefined) {\n      result.response_metadata.messages.forEach(msg => {\n        const errReg = /\\[ERROR\\](.*)/;\n        const warnReg = /\\[WARN\\](.*)/;\n\n        if (errReg.test(msg)) {\n          const errMatch = msg.match(errReg);\n\n          if (errMatch != null) {\n            this.logger.error(errMatch[1].trim());\n          }\n        } else if (warnReg.test(msg)) {\n          const warnMatch = msg.match(warnReg);\n\n          if (warnMatch != null) {\n            this.logger.warn(warnMatch[1].trim());\n          }\n        }\n      });\n    }\n\n    if (!result.ok) {\n      throw (0, errors_1.platformErrorFromResult)(result);\n    }\n\n    return result;\n  }\n\n  paginate(method, options, shouldStop, reduce) {\n    if (!methods_1.cursorPaginationEnabledMethods.has(method)) {\n      this.logger.warn(`paginate() called with method ${method}, which is not known to be cursor pagination enabled.`);\n    }\n\n    const pageSize = (() => {\n      if (options !== undefined && typeof options.limit === 'number') {\n        const {\n          limit\n        } = options; // eslint-disable-next-line no-param-reassign\n\n        delete options.limit;\n        return limit;\n      }\n\n      return defaultPageSize;\n    })();\n\n    function generatePages() {\n      return __asyncGenerator(this, arguments, function* generatePages_1() {\n        // when result is undefined, that signals that the first of potentially many calls has not yet been made\n        let result; // paginationOptions stores pagination options not already stored in the options argument\n\n        let paginationOptions = {\n          limit: pageSize\n        };\n\n        if (options !== undefined && options.cursor !== undefined) {\n          paginationOptions.cursor = options.cursor;\n        } // NOTE: test for the situation where you're resuming a pagination using and existing cursor\n\n\n        while (result === undefined || paginationOptions !== undefined) {\n          // eslint-disable-next-line no-await-in-loop\n          result = yield __await(this.apiCall(method, Object.assign(options !== undefined ? options : {}, paginationOptions)));\n          yield yield __await(result);\n          paginationOptions = paginationOptionsForNextPage(result, pageSize);\n        }\n      });\n    }\n\n    if (shouldStop === undefined) {\n      return generatePages.call(this);\n    }\n\n    const pageReducer = reduce !== undefined ? reduce : noopPageReducer;\n    let index = 0;\n    return (async () => {\n      // Unroll the first iteration of the iterator\n      // This is done primarily because in order to satisfy the type system, we need a variable that is typed as A\n      // (shown as accumulator before), but before the first iteration all we have is a variable typed A | undefined.\n      // Unrolling the first iteration allows us to deal with undefined as a special case.\n      var e_1, _a;\n\n      const pageIterator = generatePages.call(this);\n      const firstIteratorResult = await pageIterator.next(undefined); // Assumption: there will always be at least one result in a paginated API request\n      // if (firstIteratorResult.done) { return; }\n\n      const firstPage = firstIteratorResult.value;\n      let accumulator = pageReducer(undefined, firstPage, index);\n      index += 1;\n\n      if (shouldStop(firstPage)) {\n        return accumulator;\n      }\n\n      try {\n        // Continue iteration\n        // eslint-disable-next-line no-restricted-syntax\n        for (var pageIterator_1 = __asyncValues(pageIterator), pageIterator_1_1; pageIterator_1_1 = await pageIterator_1.next(), !pageIterator_1_1.done;) {\n          const page = pageIterator_1_1.value;\n          accumulator = pageReducer(accumulator, page, index);\n\n          if (shouldStop(page)) {\n            return accumulator;\n          }\n\n          index += 1;\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (pageIterator_1_1 && !pageIterator_1_1.done && (_a = pageIterator_1.return)) await _a.call(pageIterator_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      return accumulator;\n    })();\n  }\n  /**\n   * Low-level function to make a single API request. handles queuing, retries, and http-level errors\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  async makeRequest(url, body) {\n    let headers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    // TODO: better input types - remove any\n    const task = () => this.requestQueue.add(async () => {\n      this.logger.debug('will perform http request');\n\n      try {\n        const response = await this.axios.post(url, body, Object.assign({\n          headers\n        }, this.tlsConfig));\n        this.logger.debug('http response received');\n\n        if (response.status === 429) {\n          const retrySec = parseRetryHeaders(response);\n\n          if (retrySec !== undefined) {\n            this.emit(WebClientEvent.RATE_LIMITED, retrySec);\n\n            if (this.rejectRateLimitedCalls) {\n              throw new p_retry_1.AbortError((0, errors_1.rateLimitedErrorWithDelay)(retrySec));\n            }\n\n            this.logger.info(`API Call failed due to rate limiting. Will retry in ${retrySec} seconds.`); // pause the request queue and then delay the rejection by the amount of time in the retry header\n\n            this.requestQueue.pause(); // NOTE: if there was a way to introspect the current RetryOperation and know what the next timeout\n            // would be, then we could subtract that time from the following delay, knowing that it the next\n            // attempt still wouldn't occur until after the rate-limit header has specified. an even better\n            // solution would be to subtract the time from only the timeout of this next attempt of the\n            // RetryOperation. this would result in the staying paused for the entire duration specified in the\n            // header, yet this operation not having to pay the timeout cost in addition to that.\n\n            await (0, helpers_1.default)(retrySec * 1000); // resume the request queue and throw a non-abort error to signal a retry\n\n            this.requestQueue.start(); // TODO: We may want to have more detailed info such as team_id, params except tokens, and so on.\n\n            throw Error(`A rate limit was exceeded (url: ${url}, retry-after: ${retrySec})`);\n          } else {\n            // TODO: turn this into some CodedError\n            throw new p_retry_1.AbortError(new Error(`Retry header did not contain a valid timeout (url: ${url}, retry-after header: ${response.headers['retry-after']})`));\n          }\n        } // Slack's Web API doesn't use meaningful status codes besides 429 and 200\n\n\n        if (response.status !== 200) {\n          throw (0, errors_1.httpErrorFromResponse)(response);\n        }\n\n        return response;\n      } catch (error) {\n        // To make this compatible with tsd, casting here instead of `catch (error: any)`\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const e = error;\n        this.logger.warn('http request failed', e.message);\n\n        if (e.request) {\n          throw (0, errors_1.requestErrorWithOriginal)(e);\n        }\n\n        throw error;\n      }\n    });\n\n    return (0, p_retry_1.default)(task, this.retryConfig);\n  }\n  /**\n   * Transforms options (a simple key-value object) into an acceptable value for a body. This can be either\n   * a string, used when posting with a content-type of url-encoded. Or, it can be a readable stream, used\n   * when the options contain a binary (a stream or a buffer) and the upload should be done with content-type\n   * multipart/form-data.\n   *\n   * @param options - arguments for the Web API method\n   * @param headers - a mutable object representing the HTTP headers for the outgoing request\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  serializeApiCallOptions(options, headers) {\n    // The following operation both flattens complex objects into a JSON-encoded strings and searches the values for\n    // binary content\n    let containsBinaryData = false; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    const flattened = Object.entries(options).map(_ref => {\n      let [key, value] = _ref;\n\n      if (value === undefined || value === null) {\n        return [];\n      }\n\n      let serializedValue = value;\n\n      if (Buffer.isBuffer(value) || (0, is_stream_1.default)(value)) {\n        containsBinaryData = true;\n      } else if (typeof value !== 'string' && typeof value !== 'number' && typeof value !== 'boolean') {\n        // if value is anything other than string, number, boolean, binary data, a Stream, or a Buffer, then encode it\n        // as a JSON string.\n        serializedValue = JSON.stringify(value);\n      }\n\n      return [key, serializedValue];\n    }); // A body with binary content should be serialized as multipart/form-data\n\n    if (containsBinaryData) {\n      this.logger.debug('request arguments contain binary data');\n      const form = flattened.reduce((frm, _ref2) => {\n        let [key, value] = _ref2;\n\n        if (Buffer.isBuffer(value) || (0, is_stream_1.default)(value)) {\n          const opts = {};\n\n          opts.filename = (() => {\n            // attempt to find filename from `value`. adapted from:\n            // https://github.com/form-data/form-data/blob/028c21e0f93c5fefa46a7bbf1ba753e4f627ab7a/lib/form_data.js#L227-L230\n            // formidable and the browser add a name property\n            // fs- and request- streams have path property\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const streamOrBuffer = value;\n\n            if (typeof streamOrBuffer.name === 'string') {\n              return (0, path_1.basename)(streamOrBuffer.name);\n            }\n\n            if (typeof streamOrBuffer.path === 'string') {\n              return (0, path_1.basename)(streamOrBuffer.path);\n            }\n\n            return defaultFilename;\n          })();\n\n          frm.append(key, value, opts);\n        } else if (key !== undefined && value !== undefined) {\n          frm.append(key, value);\n        }\n\n        return frm;\n      }, new form_data_1.default()); // Copying FormData-generated headers into headers param\n      // not reassigning to headers param since it is passed by reference and behaves as an inout param\n\n      Object.entries(form.getHeaders()).forEach(_ref3 => {\n        let [header, value] = _ref3;\n        // eslint-disable-next-line no-param-reassign\n        headers[header] = value;\n      });\n      return form;\n    } // Otherwise, a simple key-value object is returned\n    // eslint-disable-next-line no-param-reassign\n\n\n    headers['Content-Type'] = 'application/x-www-form-urlencoded'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    const initialValue = {};\n    return (0, querystring_1.stringify)(flattened.reduce((accumulator, _ref4) => {\n      let [key, value] = _ref4;\n\n      if (key !== undefined && value !== undefined) {\n        accumulator[key] = value;\n      }\n\n      return accumulator;\n    }, initialValue));\n  }\n  /**\n   * Processes an HTTP response into a WebAPICallResult by performing JSON parsing on the body and merging relevant\n   * HTTP headers into the object.\n   * @param response - an http response\n   */\n  // eslint-disable-next-line class-methods-use-this\n\n\n  buildResult(response) {\n    let {\n      data\n    } = response;\n\n    if (typeof data === 'string') {\n      // response.data can be a string, not an object for some reason\n      try {\n        data = JSON.parse(data);\n      } catch (_) {\n        // failed to parse the string value as JSON data\n        data = {\n          ok: false,\n          error: data\n        };\n      }\n    }\n\n    if (data.response_metadata === undefined) {\n      data.response_metadata = {};\n    } // add scopes metadata from headers\n\n\n    if (response.headers['x-oauth-scopes'] !== undefined) {\n      data.response_metadata.scopes = response.headers['x-oauth-scopes'].trim().split(/\\s*,\\s*/);\n    }\n\n    if (response.headers['x-accepted-oauth-scopes'] !== undefined) {\n      data.response_metadata.acceptedScopes = response.headers['x-accepted-oauth-scopes'].trim().split(/\\s*,\\s*/);\n    } // add retry metadata from headers\n\n\n    const retrySec = parseRetryHeaders(response);\n\n    if (retrySec !== undefined) {\n      data.response_metadata.retryAfter = retrySec;\n    }\n\n    return data;\n  }\n\n}\n\nexports.WebClient = WebClient;\n/**\n * The name used to prefix all logging generated from this object\n */\n\nWebClient.loggerName = 'WebClient';\nexports.default = WebClient;\n/**\n * Determines an appropriate set of cursor pagination options for the next request to a paginated API method.\n * @param previousResult - the result of the last request, where the next cursor might be found.\n * @param pageSize - the maximum number of additional items to fetch in the next request.\n */\n\nfunction paginationOptionsForNextPage(previousResult, pageSize) {\n  if (previousResult !== undefined && previousResult.response_metadata !== undefined && previousResult.response_metadata.next_cursor !== undefined && previousResult.response_metadata.next_cursor !== '') {\n    return {\n      limit: pageSize,\n      cursor: previousResult.response_metadata.next_cursor\n    };\n  }\n\n  return undefined;\n}\n/**\n * Extract the amount of time (in seconds) the platform has recommended this client wait before sending another request\n * from a rate-limited HTTP response (statusCode = 429).\n */\n\n\nfunction parseRetryHeaders(response) {\n  if (response.headers['retry-after'] !== undefined) {\n    const retryAfter = parseInt(response.headers['retry-after'], 10);\n\n    if (!Number.isNaN(retryAfter)) {\n      return retryAfter;\n    }\n  }\n\n  return undefined;\n}\n/**\n * Log a warning when using a deprecated method\n * @param method api method being called\n * @param logger instance of web clients logger\n */\n\n\nfunction warnDeprecations(method, logger) {\n  const deprecatedConversationsMethods = ['channels.', 'groups.', 'im.', 'mpim.'];\n  const deprecatedMethods = ['admin.conversations.whitelist.'];\n  const isDeprecatedConversations = deprecatedConversationsMethods.some(depMethod => {\n    const re = new RegExp(`^${depMethod}`);\n    return re.test(method);\n  });\n  const isDeprecated = deprecatedMethods.some(depMethod => {\n    const re = new RegExp(`^${depMethod}`);\n    return re.test(method);\n  });\n\n  if (isDeprecatedConversations) {\n    logger.warn(`${method} is deprecated. Please use the Conversations API instead. For more info, go to https://api.slack.com/changelog/2020-01-deprecating-antecedents-to-the-conversations-api`);\n  } else if (isDeprecated) {\n    logger.warn(`${method} is deprecated. Please check on https://api.slack.com/methods for an alternative.`);\n  }\n}\n/**\n * Log a warning when using chat.postMessage without text argument or attachments with fallback argument\n * @param method api method being called\n * @param logger instance of we clients logger\n * @param options arguments for the Web API method\n */\n\n\nfunction warnIfFallbackIsMissing(method, logger, options) {\n  const targetMethods = ['chat.postEphemeral', 'chat.postMessage', 'chat.scheduleMessage', 'chat.update'];\n  const isTargetMethod = targetMethods.includes(method);\n\n  const missingAttachmentFallbackDetected = args => Array.isArray(args.attachments) && args.attachments.some(attachment => !attachment.fallback || attachment.fallback.trim() === '');\n\n  const isEmptyText = args => args.text === undefined || args.text === null || args.text === '';\n\n  const buildMissingTextWarning = () => `The top-level \\`text\\` argument is missing in the request payload for a ${method} call - ` + 'It\\'s a best practice to always provide a `text` argument when posting a message. ' + 'The `text` is used in places where the content cannot be rendered such as: ' + 'system push notifications, assistive technology such as screen readers, etc.';\n\n  const buildMissingFallbackWarning = () => `Additionally, the attachment-level \\`fallback\\` argument is missing in the request payload for a ${method} call - ` + 'To avoid this warning, it is recommended to always provide a top-level `text` argument when posting a message. ' + 'Alternatively, you can provide an attachment-level `fallback` argument, though this is now considered a legacy field (see https://api.slack.com/reference/messaging/attachments#legacy_fields for more details).';\n\n  if (isTargetMethod && typeof options === 'object') {\n    if (isEmptyText(options)) {\n      logger.warn(buildMissingTextWarning());\n\n      if (missingAttachmentFallbackDetected(options)) {\n        logger.warn(buildMissingFallbackWarning());\n      }\n    }\n  }\n}\n/**\n * Log a warning when thread_ts is not a string\n * @param method api method being called\n * @param logger instance of web clients logger\n * @param options arguments for the Web API method\n */\n\n\nfunction warnIfThreadTsIsNotString(method, logger, options) {\n  const targetMethods = ['chat.postEphemeral', 'chat.postMessage', 'chat.scheduleMessage', 'files.upload'];\n  const isTargetMethod = targetMethods.includes(method);\n\n  if (isTargetMethod && (options === null || options === void 0 ? void 0 : options.thread_ts) !== undefined && typeof (options === null || options === void 0 ? void 0 : options.thread_ts) !== 'string') {\n    logger.warn(`The given thread_ts value in the request payload for a ${method} call is a float value. We highly recommend using a string value instead.`);\n  }\n}","map":{"version":3,"mappings":"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","names":["defaultFilename","defaultPageSize","noopPageReducer","undefined","WebClientEvent","exports","WebClient","methods_1","constructor","token","slackApiUrl","logger","logLevel","maxRequestConcurrency","retryConfig","retry_policies_1","agent","tls","timeout","rejectRateLimitedCalls","headers","teamId","requestQueue","p_queue_1","concurrency","tlsConfig","debug","loggerName","logger_1","INFO","Authorization","axios","axios_1","create","baseURL","Object","httpAgent","httpsAgent","transformRequest","serializeApiCallOptions","bind","validateStatus","maxRedirects","proxy","defaults","post","apiCall","method","options","warnDeprecations","warnIfFallbackIsMissing","warnIfThreadTsIsNotString","TypeError","response","makeRequest","team_id","result","buildResult","response_metadata","warnings","forEach","warn","messages","msg","errReg","warnReg","test","errMatch","match","error","trim","warnMatch","ok","paginate","shouldStop","reduce","has","pageSize","limit","generatePages","paginationOptions","cursor","assign","paginationOptionsForNextPage","call","pageReducer","index","pageIterator","firstIteratorResult","next","firstPage","value","accumulator","pageIterator_1_1","page","url","body","task","add","status","retrySec","parseRetryHeaders","emit","RATE_LIMITED","p_retry_1","info","pause","start","Error","e","message","request","containsBinaryData","flattened","entries","map","key","serializedValue","Buffer","isBuffer","JSON","stringify","form","frm","opts","filename","streamOrBuffer","name","path","append","form_data_1","getHeaders","header","initialValue","data","parse","_","scopes","split","acceptedScopes","retryAfter","previousResult","next_cursor","parseInt","Number","isNaN","deprecatedConversationsMethods","deprecatedMethods","isDeprecatedConversations","some","depMethod","re","RegExp","isDeprecated","targetMethods","isTargetMethod","includes","missingAttachmentFallbackDetected","args","Array","isArray","attachments","attachment","fallback","isEmptyText","text","buildMissingTextWarning","buildMissingFallbackWarning","thread_ts"],"sourceRoot":"","sources":["../src/WebClient.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}