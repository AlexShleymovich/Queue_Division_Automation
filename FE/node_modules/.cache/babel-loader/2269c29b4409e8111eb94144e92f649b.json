{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexshle/Desktop/Alex/Python/my_app_test/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/alexshle/Desktop/Alex/Python/my_app_test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alexshle/Desktop/Alex/Python/my_app_test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import{UserContext,ItemsContext}from\"./Context\";import{Backdrop,CircularProgress}from\"@mui/material\";import Shifter from\"./Shifter\";import Buttons from\"./Buttons\";import ShifterText from\"./ShifterText\";import{Container,Tabs,TextTabs}from\"./Styles/Items.styled\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Items=function Items(){var _useContext=useContext(UserContext),userToken=_useContext.userToken,setUserToken=_useContext.setUserToken;var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),whoWork=_useState2[0],setWhoWork=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),deletedShifter=_useState6[0],setDeletedShifter=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),scheduleText=_useState8[0],setScheduleText=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),night=_useState10[0],setNight=_useState10[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"TEST 1st\");_context.next=3;return fetch(\"http://127.0.0.1:5000/main\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+userToken}});case 3:response=_context.sent;if(!(response.status===401)){_context.next=10;break;}console.log(\"session expired -> redirect\");setUserToken();navigate(\"/\");_context.next=16;break;case 10:_context.next=12;return response.json();case 12:data=_context.sent;setWhoWork(data[0]);setNight(data[1]);setOpen(false);case 16:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();if(!userToken){navigate(\"/\");}else{fetchData();}},[]);useEffect(function(){var updateDataFetch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://127.0.0.1:5000/main\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+userToken},body:JSON.stringify({deleted:deletedShifter,night:night})});case 2:response=_context2.sent;if(response.ok){_context2.next=7;break;}if(response.status===400){alert(\"Sorry...Unable to delete this shifter\");}else{console.log(\"session expired -> redirect from POST\");setUserToken();navigate(\"/\");}_context2.next=11;break;case 7:_context2.next=9;return response.json();case 9:data=_context2.sent;setWhoWork(data[0]);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function updateDataFetch(){return _ref2.apply(this,arguments);};}();if(deletedShifter!==null){updateDataFetch();}},[deletedShifter]);return/*#__PURE__*/_jsxs(\"div\",{children:[!whoWork&&/*#__PURE__*/_jsxs(Backdrop,{open:open,color:\"#DCDCDC\",children:[/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Fetching\"})]}),whoWork&&/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(ItemsContext.Provider,{value:{whoWork:whoWork,setWhoWork:setWhoWork},children:[/*#__PURE__*/_jsx(Tabs,{children:/*#__PURE__*/_jsx(Shifter,{onChangeShifterDelete:setDeletedShifter,onChangeNightShifters:setNight,data:night})}),/*#__PURE__*/_jsx(TextTabs,{children:/*#__PURE__*/_jsx(ShifterText,{slack:setScheduleText})}),/*#__PURE__*/_jsx(Buttons,{data:scheduleText})]})})]});};export default Items;","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","UserContext","ItemsContext","Backdrop","CircularProgress","Shifter","Buttons","ShifterText","Container","Tabs","TextTabs","Items","userToken","setUserToken","navigate","whoWork","setWhoWork","open","setOpen","deletedShifter","setDeletedShifter","scheduleText","setScheduleText","night","setNight","fetchData","console","log","fetch","method","headers","Authorization","response","status","json","data","updateDataFetch","body","JSON","stringify","deleted","ok","alert"],"sources":["/Users/alexshle/Desktop/Alex/Python/my_app_test/src/Components/Items.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { UserContext, ItemsContext } from \"./Context\";\nimport { Backdrop, CircularProgress } from \"@mui/material\";\nimport Shifter from \"./Shifter\";\nimport Buttons from \"./Buttons\";\nimport ShifterText from \"./ShifterText\";\nimport { Container, Tabs, TextTabs } from \"./Styles/Items.styled\";\n\nconst Items = () => {\n  const { userToken, setUserToken } = useContext(UserContext);\n  const navigate = useNavigate();\n  const [whoWork, setWhoWork] = useState();\n  const [open, setOpen] = useState(true);\n  const [deletedShifter, setDeletedShifter] = useState(null);\n  const [scheduleText, setScheduleText] = useState(null);\n  const [night, setNight] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      console.log(\"TEST 1st\");\n      const response = await fetch(\"http://127.0.0.1:5000/main\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + userToken,\n        },\n      });\n      if (response.status === 401) {\n        console.log(\"session expired -> redirect\");\n        setUserToken();\n        navigate(\"/\");\n      } else {\n        const data = await response.json();\n        setWhoWork(data[0]);\n        setNight(data[1]);\n        setOpen(false);\n      }\n    };\n    if (!userToken) {\n      navigate(\"/\");\n    } else {\n      fetchData();\n    }\n  }, []);\n\n  useEffect(() => {\n    const updateDataFetch = async () => {\n      const response = await fetch(\"http://127.0.0.1:5000/main\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + userToken,\n        },\n        body: JSON.stringify({ deleted: deletedShifter, night: night }),\n      });\n      if (!response.ok) {\n        if (response.status === 400) {\n          alert(\"Sorry...Unable to delete this shifter\");\n        } else {\n          console.log(\"session expired -> redirect from POST\");\n          setUserToken();\n          navigate(\"/\");\n        }\n      } else {\n        const data = await response.json();\n        setWhoWork(data[0]);\n      }\n    };\n    if (deletedShifter !== null) {\n      updateDataFetch();\n    }\n  }, [deletedShifter]);\n\n  return (\n    <div>\n      {!whoWork && (\n        <Backdrop open={open} color=\"#DCDCDC\">\n          <CircularProgress color=\"inherit\" />\n          <h1>Fetching</h1>\n        </Backdrop>\n      )}\n      {whoWork && (\n        <Container>\n          <ItemsContext.Provider value={{ whoWork, setWhoWork }}>\n            <Tabs>\n              <Shifter\n                onChangeShifterDelete={setDeletedShifter}\n                onChangeNightShifters={setNight}\n                data={night}\n              />\n            </Tabs>\n            <TextTabs>\n              <ShifterText slack={setScheduleText} />\n            </TextTabs>\n            {/* <RadioButton data={night} setData={setNight} /> */}\n            <Buttons data={scheduleText} />\n          </ItemsContext.Provider>\n        </Container>\n      )}\n    </div>\n  );\n};\n\nexport default Items;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}