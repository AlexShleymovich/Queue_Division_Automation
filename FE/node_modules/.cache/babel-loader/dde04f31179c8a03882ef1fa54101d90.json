{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexshle/Desktop/Alex/Python/my_app_test/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"/Users/alexshle/Desktop/Alex/Python/my_app_test/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/alexshle/Desktop/Alex/Python/my_app_test/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/alexshle/Desktop/Alex/Python/my_app_test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alexshle/Desktop/Alex/Python/my_app_test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";import FormInput from\"./FormInput\";import{Container}from\"./Styles/Login.styled\";import{useNavigate}from\"react-router-dom\";import{UserContext}from\"./Context\";import CircularProgress from'@mui/material/CircularProgress';import Alert from\"@mui/material/Alert\";import Button from\"@mui/material/Button\";import{Typography}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loginError=_useState2[0],setLoginError=_useState2[1];var _useContext=useContext(UserContext),userToken=_useContext.userToken,setUserToken=_useContext.setUserToken;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),clicked=_useState4[0],setClicked=_useState4[1];var navigate=useNavigate();var _useState5=useState({username:\"\",password:\"\",company_code:\"\"}),_useState6=_slicedToArray(_useState5,2),values=_useState6[0],setValues=_useState6[1];var inputs=[{id:1,name:\"username\",type:\"text\",label:\"Username\"},{id:2,name:\"password\",type:\"password\",label:\"Password\"},{id:3,name:\"company_code\",type:\"text\",label:\"Company Code\"}];useEffect(function(){if(userToken){navigate(\"/main\");}});function onClickHandler(){return _onClickHandler.apply(this,arguments);}function _onClickHandler(){_onClickHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setClicked(true);_context.next=3;return fetch(\"http://127.0.0.1:5000/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:values.username,password:values.password,company_code:values.company_code})});case 3:response=_context.sent;if(response.ok){_context.next=9;break;}setClicked(false);setLoginError(true);_context.next=14;break;case 9:_context.next=11;return response.json();case 11:data=_context.sent;setUserToken(data.access_token);navigate(\"/main\");case 14:case\"end\":return _context.stop();}}},_callee);}));return _onClickHandler.apply(this,arguments);}var onChange=function onChange(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value)));setLoginError(false);};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h1\",sx:{pt:\"3px\",m:\"auto\",fontWeight:\"400\",fontSize:\"50px\"},children:\"Login\"}),loginError&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:\"10px\",mt:\"10px\"},children:\"Wrong Username or Password\"}),inputs.map(function(input){return/*#__PURE__*/_jsx(FormInput,{type:input.type,name:input.name,label:input.label,value:values[input.name],onChange:onChange},input.id);}),!clicked?/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",onClick:onClickHandler,sx:{mb:\"15px\",mt:\"5px\",height:45,width:170,fontSize:23},children:\"Start\"}):/*#__PURE__*/_jsx(CircularProgress,{})]})});};export default Login;","map":{"version":3,"names":["useState","useContext","useEffect","FormInput","Container","useNavigate","UserContext","CircularProgress","Alert","Button","Typography","Login","loginError","setLoginError","userToken","setUserToken","clicked","setClicked","navigate","username","password","company_code","values","setValues","inputs","id","name","type","label","onClickHandler","fetch","method","headers","body","JSON","stringify","response","ok","json","data","access_token","onChange","e","target","value","pt","m","fontWeight","fontSize","mb","mt","map","input","height","width"],"sources":["/Users/alexshle/Desktop/Alex/Python/my_app_test/src/Components/Login.js"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport FormInput from \"./FormInput\";\nimport { Container } from \"./Styles/Login.styled\";\nimport { useNavigate } from \"react-router-dom\";\nimport { UserContext } from \"./Context\";\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Alert from \"@mui/material/Alert\";\nimport Button from \"@mui/material/Button\";\nimport { Typography } from \"@mui/material\";\n\nconst Login = () => {\n  const [loginError, setLoginError] = useState(false);\n  const { userToken, setUserToken } = useContext(UserContext);\n  const[clicked, setClicked] = useState(false)\n  const navigate = useNavigate();\n  const [values, setValues] = useState({\n    username: \"\",\n    password: \"\",\n    company_code: \"\",\n  });\n\n  const inputs = [\n    {\n      id: 1,\n      name: \"username\",\n      type: \"text\",\n      label: \"Username\",\n    },\n    {\n      id: 2,\n      name: \"password\",\n      type: \"password\",\n      label: \"Password\",\n    },\n    {\n      id: 3,\n      name: \"company_code\",\n      type: \"text\",\n      label: \"Company Code\",\n    },\n  ];\n\n  useEffect(() => {\n    if (userToken) {\n      navigate(\"/main\");\n    }\n  });\n\n  async function onClickHandler() {\n    setClicked(true);\n    const response = await fetch(\"http://127.0.0.1:5000/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        username: values.username,\n        password: values.password,\n        company_code: values.company_code,\n      }),\n    });\n    if (!response.ok) {\n      setClicked(false);\n      setLoginError(true);\n    } else {\n      const data = await response.json();\n      setUserToken(data.access_token);\n      navigate(\"/main\");\n    }\n  }\n\n  const onChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n    setLoginError(false);\n  };\n  return (\n    <Container>\n      <form>\n        <Typography\n          variant=\"h1\"\n          sx={{ pt: \"3px\", m: \"auto\", fontWeight: \"400\", fontSize: \"50px\" }}\n        >\n          Login\n        </Typography>\n\n        {loginError && (\n          <Alert severity=\"error\" sx={{ mb: \"10px\", mt: \"10px\" }}>\n            Wrong Username or Password\n          </Alert>\n        )}\n        {inputs.map((input) => (\n          <FormInput\n            key={input.id}\n            type={input.type}\n            name={input.name}\n            label={input.label}\n            value={values[input.name]}\n            onChange={onChange}\n          />\n        ))}\n        {!clicked ? (<Button\n          variant=\"contained\"\n          size=\"large\"\n          onClick={onClickHandler}\n          sx={{ mb: \"15px\", mt: \"5px\", height: 45, width: 170, fontSize: 23 }}\n        >\n          Start\n        </Button>) : <CircularProgress />}\n      </form>\n    </Container>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}